{"version":3,"sources":["audio.ts"],"names":["AudioUtils","playFile","file","cfg","AppConfig","getInstance","fullPath","dirMain","Error","process","cwd","options","audio","player","async","silent","error","log","Logger","warn"],"mappings":";;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AAEO,MAAMA,UAAN,CAAiB;AAOvB,eAAaC,QAAb,CAAsBC,IAAtB,EAAoC;AACnC,QAAIC,GAAG,GAAGC,kBAAUC,WAAV,EAAV;;AACA,QAAIC,QAAQ,GAAG,gBAAKH,GAAG,CAACI,OAAT,EAAkBL,IAAlB,CAAf;;AACA,QAAI,CAAC,mBAAK,IAAL,EAAWI,QAAX,CAAL,EAA2B;AAC1B,YAAM,IAAIE,KAAJ,CACJ,QAAON,IAAK,8CAA6CO,OAAO,CAACC,GAAR,EAAc,EADnE,CAAN;AAGA;;AACD,QAAI;AACH,yBAAM,GAAEP,GAAG,CAACQ,OAAJ,CAAYC,KAAZ,CAAkBC,MAAO,IAAGP,QAAS,EAA7C,EAAgD;AAC/CQ,QAAAA,KAAK,EAAE,IADwC;AAE/CC,QAAAA,MAAM,EAAE;AAFuC,OAAhD;AAIA,KALD,CAKE,OAAOC,KAAP,EAAc;AACf,UAAIC,GAAG,GAAGC,YAAOb,WAAP,EAAV;;AACAY,MAAAA,GAAG,CAACE,IAAJ,CAASH,KAAT;AACA;AACD;;AAxBsB","sourcesContent":["import { join } from \"path\";\nimport { exec, test } from \"shelljs\";\nimport { AppConfig } from \"./config\";\nimport { Logger } from \"./log\";\n\nexport class AudioUtils {\n\t/**\n\t * Play an audio file\n\t *\n\t * @param file Relative to program dir\n\t * @todo Bug, package cannot find mplayer\n\t */\n\tstatic async playFile(file: string) {\n\t\tlet cfg = AppConfig.getInstance();\n\t\tlet fullPath = join(cfg.dirMain, file);\n\t\tif (!test(\"-f\", fullPath)) {\n\t\t\tthrow new Error(\n\t\t\t\t`File ${file} doesn't exist. Current working directory: ${process.cwd()}`\n\t\t\t);\n\t\t}\n\t\ttry {\n\t\t\texec(`${cfg.options.audio.player} ${fullPath}`, {\n\t\t\t\tasync: true,\n\t\t\t\tsilent: true\n\t\t\t});\n\t\t} catch (error) {\n\t\t\tlet log = Logger.getInstance();\n\t\t\tlog.warn(error);\n\t\t}\n\t}\n}\n"]}